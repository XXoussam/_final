{% extends 'clientdash/index.html.twig' %}

{% block body %}
    <script src="https://cdn.jsdelivr.net/npm/web3@1.3.5/dist/web3.min.js"></script>

    <style>
        .my_form {
            width: 50%;
            justify-content: start;
            margin-top: 20px;
        }

        .my_form label {
            font-size: 17px;
            font-weight: bold;
            margin-top: 10px;
        }

        /********************************************************************************/

        #button_eth {
            background: linear-gradient(30deg, #000 35%, #317def 73%);
            position: relative;
            padding: 17px 45px;
            font-size: 16px;
            font-weight: 500;
            color: white;
            border: 3px solid #317def;
            border-radius: 8px;
            transition: all .3s ease-in-out;
            width: 8rem;
            padding-left: 1.1rem;
        }

        .star-1 {
            position: absolute;
            fill: #317def;
            top: 20%;
            left: 20%;
            width: 25px;
            height: auto;
            filter: drop-shadow(0 0 0 #317def);
            z-index: -5;
            transition: all 1s cubic-bezier(0.05, 0.83, 0.43, 0.96);
        }

        .star-2 {
            position: absolute;
            fill: #317def;
            top: 45%;
            left: 45%;
            width: 15px;
            height: auto;
            filter: drop-shadow(0 0 0 #317def);
            z-index: -5;
            transition: all 1s cubic-bezier(0, 0.4, 0, 1.01);
        }

        .star-3 {
            position: absolute;
            fill: #317def;
            top: 40%;
            left: 40%;
            width: 5px;
            height: auto;
            filter: drop-shadow(0 0 0 #317def);
            z-index: -5;
            transition: all 1s cubic-bezier(0, 0.4, 0, 1.01);
        }

        .star-4 {
            position: absolute;
            fill: #317def;
            top: 20%;
            left: 40%;
            width: 8px;
            height: auto;
            filter: drop-shadow(0 0 0 #317def);
            z-index: -5;
            transition: all .8s cubic-bezier(0, 0.4, 0, 1.01);
        }

        .star-5 {
            position: absolute;
            fill: #317def;
            top: 25%;
            left: 45%;
            width: 15px;
            height: auto;
            filter: drop-shadow(0 0 0 #317def);
            z-index: -5;
            transition: all .6s cubic-bezier(0, 0.4, 0, 1.01);
        }



        button:hover .star-1 {
            position: absolute;
            top: -110%;
            left: -60%;
            width: 30px;
            height: auto;
            filter: drop-shadow(0 0 10px #317def);
            z-index: 2;
        }

        button:hover .star-2 {
            position: absolute;
            top: -45%;
            left: 0%;
            width: 20px;
            height: auto;
            filter: drop-shadow(0 0 10px #317def);
            z-index: 2;
        }

        button:hover .star-3 {
            position: absolute;
            top: 55%;
            left: 15%;
            width: 11px;
            height: auto;
            filter: drop-shadow(0 0 10px #317def);
            z-index: 2;
        }

        button:hover .star-4 {
            position: absolute;
            top: 45%;
            left: 85%;
            width: 15px;
            height: auto;
            filter: drop-shadow(0 0 10px #317def);
            z-index: 2;
        }

        button:hover .star-5 {
            position: absolute;
            top: 25%;
            left: 140%;
            width: 25px;
            height: auto;
            filter: drop-shadow(0 0 10px #317def);
            z-index: 2;
        }

        .box {
            width: 120px;
            height: 45px;
            float: left;
            transition: .5s linear;
            position: relative;
            display: block;
            padding: 8px;
            margin: -10px -15.5px;
            background: transparent;
            text-transform: uppercase;
            font-weight: 900;
        }



        .box:before {
            position: absolute;
            content: '';
            left: 0;
            bottom: 0;
            height: 4px;
            width: 100%;
            border-bottom: 4px solid transparent;
            border-left: 4px solid transparent;
            box-sizing: border-box;
            transform: translateX(100%);
        }

        .box:after {
            position: absolute;
            content: '';
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            border-top: 4px solid transparent;
            border-right: 4px solid transparent;
            box-sizing: border-box;
            transform: translateX(-100%);
        }

        /**************************************logo eth******************************************/
        @import url('https://fonts.googleapis.com/css?family=Roboto:100,300');
        h1 {
            font-family: 'Roboto', sans-serif;
            font-size: 110px;
            font-weight:100;
            letter-spacing: 30px;
        }

        h3 {
            margin: 0;
            font-family: 'Roboto', sans-serif;
            font-weight:300;
            line-height:24px;
        }
        #space{
            width: 400px;
            height: 200px;
            transform-origin: 110px 110px;
            margin-left: 10rem;
            margin-top: -10rem;
        }

        .elogo{
            margin: auto;
            width: 400px;
            height: 400px;
            transform-style: preserve-3d;
            transform-origin: 110px 110px 0;
            transform: perspective(400px) rotateY(46deg) rotateX(-5deg) rotateZ(-5deg);
        }
        .elogo {
            animation: aniether 6s infinite;
            transform-style: preserve-3d;
            transform-origin: 110px 110px 0;
            transform: perspective(400px) rotateY(46deg) rotateX(-5deg) rotateZ(-5deg);
        }

        .trif {
            position: absolute;
            width: 0px;
            height: 0px;
            border-left: 100px solid transparent;
            border-right: 100px solid transparent;
        }
        .elogo .u1 {
            transform: translateZ(50px) rotateX(23.5deg);
            border-bottom: 250px solid rgba(50,50,51,0.8);
        }
        .elogo .u2 {
            transform: rotateY(90deg) translateZ(50px) rotateX(23.5deg);
            border-bottom: 250px solid rgba(50,50,51,0.6);
        }
        .elogo .u3 {
            transform: rotateY(180deg) translateZ(50px) rotateX(23.5deg);
            border-bottom: 250px solid rgba(50,50,51,0.3);
        }


        .elogo .ct {
            width: 200px;
            height: 200px;
            border: 0;
            transform: rotateX(-90deg) translateZ(140px);
            background-color: rgba(60,60,61,1);
        }
        .elogo .l1 {
            transform: translateY(55px) translateZ(50px) rotateX(156.5deg);
            border-bottom: 250px solid rgba(50,50,51,0.85);
        }
        .elogo .l4 {
            transform: translateY(55px) rotateY(-90deg) rotateZ(0deg) translateZ(50px) rotateX(156.5deg);
            border-bottom: 250px solid rgba(50,50,51,0.45);
        }

        @keyframes aniether {
            20%      {transform: perspective(400px) rotateY(46deg); }
            30%      {transform: perspective(400px) rotateY(10deg); }
            50%      {transform: perspective(400px) rotateY(46deg); }
            60%      {transform: perspective(400px) rotateY(80deg); }
            80%      {transform: perspective(400px) rotateY(46deg); }
            100%      {transform: perspective(400px) rotateY(46deg) rotateX(-5deg) rotateZ(-5deg); }
        }


    </style>
    <main id="main" class="main">
        <h2>p2p space</h2>
        <p style="font-size: 25px;font-weight: bolder"> trust and secure p2p exchange</p>
        <p style="width: 50%">üîí Here at FinancialHub, we ensure your transactions are securely handled with care. We act as the intermediary between you and others to create a safe and secure environment. üõ°Ô∏è</p>



        <div style="display: flex">
            <div class="my_form">
                {{ form_start(form) }}
                {{ form_row(form.amount) }}
                {{ form_row(form.price) }}
                <br>
                {{ form_row(form.submit) }}
                {{ form_end(form) }}

            </div>

            <div id="space">
                <div class="elogo">
                    <div class="trif u1"></div>
                    <div class="trif u2"></div>
                    <div class="trif u3"></div>
                    <div class="trif u4"></div>
                    <div class="ct"></div>
                    <div class="trif l1"></div>
                    <div class="trif l4"></div>
                </div>
            </div>
        </div>

        <br>
        <br>
        <hr>
        <h3>Offers</h3>
        <div class="container">
            <br>
            <h5>My Posted Offers</h5>
            <table class="table">
                <thead>
                <tr>
                    <th scope="col">Date</th>
                    <th scope="col">Amount</th>
                    <th scope="col">Rate</th>
                    <th scope="col">status</th>
                </tr>
                </thead>
                <tbody>
                {% if posts|length == 0 %}
                    <tr>
                        <td colspan="4">No offers available</td>
                    </tr>
                {% else %}
                    {% for post in posts %}
                        <tr>
                            <td>{{ post.created_at|date('Y-m-d H:i') }}</td>
                            <td>{{ post.amount }}</td>
                            <td>{{ post.price }}</td>
                            <td>{{ post.status }}</td>
                        </tr>
                    {% endfor %}
                {% endif %}

                </tbody>
            </table>
        </div>

        <div class="container">
            {% for post in others_posts %}
                <div class="card">
                    <h5 class="card-header" id="post_date">posted in {{ post.created_at|date('Y-m-d H:i') }}</h5>
                    <div class="card-body">
                        <h5 class="card-title">{{ post.owner }}</h5>
                           <p style="font-size: 20px" class="card-text" id="post_amount"data-post-amount="{{ post.amount }}">amount for sale : {{ post.amount }} ETH</p>
                           <p style="font-size: 20px" class="card-text" id="post_price" data-post-price="{{ post.price }}">asked price : {{ post.price }}$</p>
                           <button style="margin-left: 80%" id="button_eth" class="buy_eth_button" data-post-id="{{ post.id }}">
                             <span class="box">
                                 Buy ETH
                             <div class="star-1">
                                <svg xmlns="http://www.w3.org/2000/svg" data-name="Layer 1" viewBox="0 0 512 512" id="ethereum"><circle cx="256" cy="256" r="248.5" fill="#4956fc"></circle><circle cx="256" cy="256" r="198.5" fill="#5e8df7"></circle><path fill="#fefefe" d="m349.4 244.12-15.54 8.82-79.01 29.82-92.25-38.64 92.25-158.08 94.55 158.08z"></path><path fill="#c0cbf8" d="m349.4 244.12-94.55 53.64-92.25-53.64 92.25-43.07 94.55 43.07z"></path><path fill="#fefefe" d="m349.4 281.84-94.55 144.12-92.25-144.12 92.25 53.63 94.55-53.63z"></path><path fill="#c0cbf8" d="m349.4 281.84-94.55 144.12v-90.49l94.55-53.63zM349.4 244.12l-15.54 8.82-79.01-45.18V86.04l94.55 158.08z"></path><path fill="#8095f0" d="m349.4 244.12-94.55 53.64v-96.71l94.55 43.07z"></path><path fill="#3c3b41" d="M356.785 242.866a7.482 7.482 0 0 0-.05-.261q-.075-.36-.184-.71c-.02-.066-.037-.133-.059-.198a7.495 7.495 0 0 0-.345-.838c-.032-.067-.07-.13-.103-.195-.069-.133-.133-.266-.21-.395L261.285 82.192c-.02-.033-.045-.061-.065-.094q-.196-.315-.42-.61c-.036-.046-.07-.095-.107-.141a7.516 7.516 0 0 0-.587-.65c-.041-.041-.086-.077-.128-.117q-.257-.242-.536-.459a7.385 7.385 0 0 0-.2-.15q-.287-.207-.593-.387c-.047-.028-.092-.059-.14-.085a7.47 7.47 0 0 0-.805-.391c-.027-.011-.055-.02-.082-.03a7.426 7.426 0 0 0-.749-.252c-.074-.02-.15-.039-.224-.057q-.328-.081-.667-.132c-.078-.012-.156-.027-.235-.036a7.54 7.54 0 0 0-.898-.059h-.04c-.034 0-.066.006-.099.007a7.56 7.56 0 0 0-.788.056c-.083.01-.165.025-.248.038q-.34.054-.67.137c-.07.018-.142.035-.212.055a7.445 7.445 0 0 0-1.635.683c-.06.034-.116.071-.174.106q-.292.177-.566.378c-.067.049-.134.097-.2.149a7.524 7.524 0 0 0-.592.516c-.022.02-.045.039-.066.06a7.536 7.536 0 0 0-.579.653c-.048.061-.093.125-.14.187q-.21.282-.394.584c-.023.038-.052.072-.074.11l-92.247 158.077c-.065.112-.119.229-.178.343-.037.072-.077.142-.112.215a7.476 7.476 0 0 0-.34.833c-.016.05-.028.102-.043.152a7.441 7.441 0 0 0-.19.742 7.76 7.76 0 0 0-.048.255 7.515 7.515 0 0 0-.095.824c-.001.027-.007.053-.009.08v.02a7.488 7.488 0 0 0 .023.922c.007.083.018.164.027.246q.04.352.114.7c.017.079.03.158.05.237.01.041.016.083.027.125a7.527 7.527 0 0 0 .239.742c.014.037.032.071.047.108a7.464 7.464 0 0 0 .332.72c.04.077.082.152.125.227q.18.317.39.613c.037.053.071.108.11.16a7.5 7.5 0 0 0 .58.686c.05.052.103.1.155.151q.255.253.533.48c.068.056.135.111.204.164a7.49 7.49 0 0 0 .767.52l92.246 53.636c.022.013.046.021.068.034a7.445 7.445 0 0 0 .824.408l.03.011a7.44 7.44 0 0 0 .818.278c.074.02.149.038.223.057q.334.083.68.135c.051.007.101.023.152.03.026.003.053.002.08.005a6.918 6.918 0 0 0 1.777.002c.077-.01.153-.023.23-.035a7.441 7.441 0 0 0 .891-.187 7.416 7.416 0 0 0 .729-.242c.036-.015.074-.026.11-.04a7.486 7.486 0 0 0 .818-.397c.014-.007.028-.012.04-.02l94.55-53.636.022-.014a7.496 7.496 0 0 0 .754-.5c.073-.055.143-.112.214-.17q.279-.223.534-.472c.055-.053.112-.103.164-.158a7.51 7.51 0 0 0 .591-.69c.038-.048.07-.1.105-.15q.217-.302.403-.625a7.43 7.43 0 0 0 .128-.23 7.494 7.494 0 0 0 .328-.7c.018-.046.041-.09.059-.137a7.486 7.486 0 0 0 .248-.765c.01-.036.014-.073.023-.109.02-.077.033-.154.05-.231q.075-.352.116-.707c.01-.086.02-.17.028-.257a7.507 7.507 0 0 0 .023-.934v-.006c0-.012-.002-.022-.003-.033a7.49 7.49 0 0 0-.101-.888ZM247.349 284.72l-68.575-39.873 68.575-32.015Zm0-88.442-66.173 30.893 66.173-113.395Zm15-83.084 68.262 114.128-68.261-31.093Zm0 171.684v-72.166l70.56 32.139ZM437.02 74.98A256 256 0 0 0 74.98 437.02 256 256 0 0 0 437.02 74.98Zm-10.606 351.433A241 241 0 1 1 85.587 85.587a241 241 0 0 1 340.826 340.826ZM256 50C142.411 50 50 142.411 50 256s92.411 206 206 206 206-92.411 206-206S369.589 50 256 50Zm0 397c-105.318 0-191-85.682-191-191S150.682 65 256 65c105.317 0 191 85.682 191 191s-85.683 191-191 191Zm89.697-171.688-90.802 51.51-88.522-51.47a7.5 7.5 0 0 0-10.087 10.526l92.246 144.123.038.052a7.508 7.508 0 0 0 .51.696c.025.03.052.055.077.084q.238.279.503.532c.065.063.133.122.2.182q.225.201.466.384c.068.051.136.104.206.153a7.486 7.486 0 0 0 .654.415l.053.032a7.475 7.475 0 0 0 .787.373l.158.058q.32.122.654.215a7.39 7.39 0 0 0 .86.184c.084.013.167.028.253.038.243.03.49.046.74.051.039 0 .077.008.116.008h.042a7.552 7.552 0 0 0 .87-.055c.079-.009.155-.023.233-.035a7.464 7.464 0 0 0 .87-.181q.32-.087.627-.202c.063-.023.126-.044.188-.068a7.476 7.476 0 0 0 1.496-.807c.063-.045.124-.093.186-.14a7.537 7.537 0 0 0 1.13-1.035c.045-.05.093-.098.136-.15a7.52 7.52 0 0 0 .518-.69l.017-.023 94.549-144.123a7.5 7.5 0 0 0-9.972-10.637ZM247.35 400.328 185.63 303.9l61.72 35.887Zm15 .524V339.84l63.752-36.166Z"></path></svg>

                                     </div>
                                 <div class="star-2">
                                 <svg xmlns="http://www.w3.org/2000/svg" data-name="Layer 1" viewBox="0 0 512 512" id="ethereum"><circle cx="256" cy="256" r="248.5" fill="#4956fc"></circle><circle cx="256" cy="256" r="198.5" fill="#5e8df7"></circle><path fill="#fefefe" d="m349.4 244.12-15.54 8.82-79.01 29.82-92.25-38.64 92.25-158.08 94.55 158.08z"></path><path fill="#c0cbf8" d="m349.4 244.12-94.55 53.64-92.25-53.64 92.25-43.07 94.55 43.07z"></path><path fill="#fefefe" d="m349.4 281.84-94.55 144.12-92.25-144.12 92.25 53.63 94.55-53.63z"></path><path fill="#c0cbf8" d="m349.4 281.84-94.55 144.12v-90.49l94.55-53.63zM349.4 244.12l-15.54 8.82-79.01-45.18V86.04l94.55 158.08z"></path><path fill="#8095f0" d="m349.4 244.12-94.55 53.64v-96.71l94.55 43.07z"></path><path fill="#3c3b41" d="M356.785 242.866a7.482 7.482 0 0 0-.05-.261q-.075-.36-.184-.71c-.02-.066-.037-.133-.059-.198a7.495 7.495 0 0 0-.345-.838c-.032-.067-.07-.13-.103-.195-.069-.133-.133-.266-.21-.395L261.285 82.192c-.02-.033-.045-.061-.065-.094q-.196-.315-.42-.61c-.036-.046-.07-.095-.107-.141a7.516 7.516 0 0 0-.587-.65c-.041-.041-.086-.077-.128-.117q-.257-.242-.536-.459a7.385 7.385 0 0 0-.2-.15q-.287-.207-.593-.387c-.047-.028-.092-.059-.14-.085a7.47 7.47 0 0 0-.805-.391c-.027-.011-.055-.02-.082-.03a7.426 7.426 0 0 0-.749-.252c-.074-.02-.15-.039-.224-.057q-.328-.081-.667-.132c-.078-.012-.156-.027-.235-.036a7.54 7.54 0 0 0-.898-.059h-.04c-.034 0-.066.006-.099.007a7.56 7.56 0 0 0-.788.056c-.083.01-.165.025-.248.038q-.34.054-.67.137c-.07.018-.142.035-.212.055a7.445 7.445 0 0 0-1.635.683c-.06.034-.116.071-.174.106q-.292.177-.566.378c-.067.049-.134.097-.2.149a7.524 7.524 0 0 0-.592.516c-.022.02-.045.039-.066.06a7.536 7.536 0 0 0-.579.653c-.048.061-.093.125-.14.187q-.21.282-.394.584c-.023.038-.052.072-.074.11l-92.247 158.077c-.065.112-.119.229-.178.343-.037.072-.077.142-.112.215a7.476 7.476 0 0 0-.34.833c-.016.05-.028.102-.043.152a7.441 7.441 0 0 0-.19.742 7.76 7.76 0 0 0-.048.255 7.515 7.515 0 0 0-.095.824c-.001.027-.007.053-.009.08v.02a7.488 7.488 0 0 0 .023.922c.007.083.018.164.027.246q.04.352.114.7c.017.079.03.158.05.237.01.041.016.083.027.125a7.527 7.527 0 0 0 .239.742c.014.037.032.071.047.108a7.464 7.464 0 0 0 .332.72c.04.077.082.152.125.227q.18.317.39.613c.037.053.071.108.11.16a7.5 7.5 0 0 0 .58.686c.05.052.103.1.155.151q.255.253.533.48c.068.056.135.111.204.164a7.49 7.49 0 0 0 .767.52l92.246 53.636c.022.013.046.021.068.034a7.445 7.445 0 0 0 .824.408l.03.011a7.44 7.44 0 0 0 .818.278c.074.02.149.038.223.057q.334.083.68.135c.051.007.101.023.152.03.026.003.053.002.08.005a6.918 6.918 0 0 0 1.777.002c.077-.01.153-.023.23-.035a7.441 7.441 0 0 0 .891-.187 7.416 7.416 0 0 0 .729-.242c.036-.015.074-.026.11-.04a7.486 7.486 0 0 0 .818-.397c.014-.007.028-.012.04-.02l94.55-53.636.022-.014a7.496 7.496 0 0 0 .754-.5c.073-.055.143-.112.214-.17q.279-.223.534-.472c.055-.053.112-.103.164-.158a7.51 7.51 0 0 0 .591-.69c.038-.048.07-.1.105-.15q.217-.302.403-.625a7.43 7.43 0 0 0 .128-.23 7.494 7.494 0 0 0 .328-.7c.018-.046.041-.09.059-.137a7.486 7.486 0 0 0 .248-.765c.01-.036.014-.073.023-.109.02-.077.033-.154.05-.231q.075-.352.116-.707c.01-.086.02-.17.028-.257a7.507 7.507 0 0 0 .023-.934v-.006c0-.012-.002-.022-.003-.033a7.49 7.49 0 0 0-.101-.888ZM247.349 284.72l-68.575-39.873 68.575-32.015Zm0-88.442-66.173 30.893 66.173-113.395Zm15-83.084 68.262 114.128-68.261-31.093Zm0 171.684v-72.166l70.56 32.139ZM437.02 74.98A256 256 0 0 0 74.98 437.02 256 256 0 0 0 437.02 74.98Zm-10.606 351.433A241 241 0 1 1 85.587 85.587a241 241 0 0 1 340.826 340.826ZM256 50C142.411 50 50 142.411 50 256s92.411 206 206 206 206-92.411 206-206S369.589 50 256 50Zm0 397c-105.318 0-191-85.682-191-191S150.682 65 256 65c105.317 0 191 85.682 191 191s-85.683 191-191 191Zm89.697-171.688-90.802 51.51-88.522-51.47a7.5 7.5 0 0 0-10.087 10.526l92.246 144.123.038.052a7.508 7.508 0 0 0 .51.696c.025.03.052.055.077.084q.238.279.503.532c.065.063.133.122.2.182q.225.201.466.384c.068.051.136.104.206.153a7.486 7.486 0 0 0 .654.415l.053.032a7.475 7.475 0 0 0 .787.373l.158.058q.32.122.654.215a7.39 7.39 0 0 0 .86.184c.084.013.167.028.253.038.243.03.49.046.74.051.039 0 .077.008.116.008h.042a7.552 7.552 0 0 0 .87-.055c.079-.009.155-.023.233-.035a7.464 7.464 0 0 0 .87-.181q.32-.087.627-.202c.063-.023.126-.044.188-.068a7.476 7.476 0 0 0 1.496-.807c.063-.045.124-.093.186-.14a7.537 7.537 0 0 0 1.13-1.035c.045-.05.093-.098.136-.15a7.52 7.52 0 0 0 .518-.69l.017-.023 94.549-144.123a7.5 7.5 0 0 0-9.972-10.637ZM247.35 400.328 185.63 303.9l61.72 35.887Zm15 .524V339.84l63.752-36.166Z"></path></svg>

                                 </div>
                                 <div class="star-3">
                                <svg xmlns="http://www.w3.org/2000/svg" data-name="Layer 1" viewBox="0 0 512 512" id="ethereum"><circle cx="256" cy="256" r="248.5" fill="#4956fc"></circle><circle cx="256" cy="256" r="198.5" fill="#5e8df7"></circle><path fill="#fefefe" d="m349.4 244.12-15.54 8.82-79.01 29.82-92.25-38.64 92.25-158.08 94.55 158.08z"></path><path fill="#c0cbf8" d="m349.4 244.12-94.55 53.64-92.25-53.64 92.25-43.07 94.55 43.07z"></path><path fill="#fefefe" d="m349.4 281.84-94.55 144.12-92.25-144.12 92.25 53.63 94.55-53.63z"></path><path fill="#c0cbf8" d="m349.4 281.84-94.55 144.12v-90.49l94.55-53.63zM349.4 244.12l-15.54 8.82-79.01-45.18V86.04l94.55 158.08z"></path><path fill="#8095f0" d="m349.4 244.12-94.55 53.64v-96.71l94.55 43.07z"></path><path fill="#3c3b41" d="M356.785 242.866a7.482 7.482 0 0 0-.05-.261q-.075-.36-.184-.71c-.02-.066-.037-.133-.059-.198a7.495 7.495 0 0 0-.345-.838c-.032-.067-.07-.13-.103-.195-.069-.133-.133-.266-.21-.395L261.285 82.192c-.02-.033-.045-.061-.065-.094q-.196-.315-.42-.61c-.036-.046-.07-.095-.107-.141a7.516 7.516 0 0 0-.587-.65c-.041-.041-.086-.077-.128-.117q-.257-.242-.536-.459a7.385 7.385 0 0 0-.2-.15q-.287-.207-.593-.387c-.047-.028-.092-.059-.14-.085a7.47 7.47 0 0 0-.805-.391c-.027-.011-.055-.02-.082-.03a7.426 7.426 0 0 0-.749-.252c-.074-.02-.15-.039-.224-.057q-.328-.081-.667-.132c-.078-.012-.156-.027-.235-.036a7.54 7.54 0 0 0-.898-.059h-.04c-.034 0-.066.006-.099.007a7.56 7.56 0 0 0-.788.056c-.083.01-.165.025-.248.038q-.34.054-.67.137c-.07.018-.142.035-.212.055a7.445 7.445 0 0 0-1.635.683c-.06.034-.116.071-.174.106q-.292.177-.566.378c-.067.049-.134.097-.2.149a7.524 7.524 0 0 0-.592.516c-.022.02-.045.039-.066.06a7.536 7.536 0 0 0-.579.653c-.048.061-.093.125-.14.187q-.21.282-.394.584c-.023.038-.052.072-.074.11l-92.247 158.077c-.065.112-.119.229-.178.343-.037.072-.077.142-.112.215a7.476 7.476 0 0 0-.34.833c-.016.05-.028.102-.043.152a7.441 7.441 0 0 0-.19.742 7.76 7.76 0 0 0-.048.255 7.515 7.515 0 0 0-.095.824c-.001.027-.007.053-.009.08v.02a7.488 7.488 0 0 0 .023.922c.007.083.018.164.027.246q.04.352.114.7c.017.079.03.158.05.237.01.041.016.083.027.125a7.527 7.527 0 0 0 .239.742c.014.037.032.071.047.108a7.464 7.464 0 0 0 .332.72c.04.077.082.152.125.227q.18.317.39.613c.037.053.071.108.11.16a7.5 7.5 0 0 0 .58.686c.05.052.103.1.155.151q.255.253.533.48c.068.056.135.111.204.164a7.49 7.49 0 0 0 .767.52l92.246 53.636c.022.013.046.021.068.034a7.445 7.445 0 0 0 .824.408l.03.011a7.44 7.44 0 0 0 .818.278c.074.02.149.038.223.057q.334.083.68.135c.051.007.101.023.152.03.026.003.053.002.08.005a6.918 6.918 0 0 0 1.777.002c.077-.01.153-.023.23-.035a7.441 7.441 0 0 0 .891-.187 7.416 7.416 0 0 0 .729-.242c.036-.015.074-.026.11-.04a7.486 7.486 0 0 0 .818-.397c.014-.007.028-.012.04-.02l94.55-53.636.022-.014a7.496 7.496 0 0 0 .754-.5c.073-.055.143-.112.214-.17q.279-.223.534-.472c.055-.053.112-.103.164-.158a7.51 7.51 0 0 0 .591-.69c.038-.048.07-.1.105-.15q.217-.302.403-.625a7.43 7.43 0 0 0 .128-.23 7.494 7.494 0 0 0 .328-.7c.018-.046.041-.09.059-.137a7.486 7.486 0 0 0 .248-.765c.01-.036.014-.073.023-.109.02-.077.033-.154.05-.231q.075-.352.116-.707c.01-.086.02-.17.028-.257a7.507 7.507 0 0 0 .023-.934v-.006c0-.012-.002-.022-.003-.033a7.49 7.49 0 0 0-.101-.888ZM247.349 284.72l-68.575-39.873 68.575-32.015Zm0-88.442-66.173 30.893 66.173-113.395Zm15-83.084 68.262 114.128-68.261-31.093Zm0 171.684v-72.166l70.56 32.139ZM437.02 74.98A256 256 0 0 0 74.98 437.02 256 256 0 0 0 437.02 74.98Zm-10.606 351.433A241 241 0 1 1 85.587 85.587a241 241 0 0 1 340.826 340.826ZM256 50C142.411 50 50 142.411 50 256s92.411 206 206 206 206-92.411 206-206S369.589 50 256 50Zm0 397c-105.318 0-191-85.682-191-191S150.682 65 256 65c105.317 0 191 85.682 191 191s-85.683 191-191 191Zm89.697-171.688-90.802 51.51-88.522-51.47a7.5 7.5 0 0 0-10.087 10.526l92.246 144.123.038.052a7.508 7.508 0 0 0 .51.696c.025.03.052.055.077.084q.238.279.503.532c.065.063.133.122.2.182q.225.201.466.384c.068.051.136.104.206.153a7.486 7.486 0 0 0 .654.415l.053.032a7.475 7.475 0 0 0 .787.373l.158.058q.32.122.654.215a7.39 7.39 0 0 0 .86.184c.084.013.167.028.253.038.243.03.49.046.74.051.039 0 .077.008.116.008h.042a7.552 7.552 0 0 0 .87-.055c.079-.009.155-.023.233-.035a7.464 7.464 0 0 0 .87-.181q.32-.087.627-.202c.063-.023.126-.044.188-.068a7.476 7.476 0 0 0 1.496-.807c.063-.045.124-.093.186-.14a7.537 7.537 0 0 0 1.13-1.035c.045-.05.093-.098.136-.15a7.52 7.52 0 0 0 .518-.69l.017-.023 94.549-144.123a7.5 7.5 0 0 0-9.972-10.637ZM247.35 400.328 185.63 303.9l61.72 35.887Zm15 .524V339.84l63.752-36.166Z"></path></svg>

                                 </div>
                                 <div class="star-4">
                                    <svg xmlns="http://www.w3.org/2000/svg" data-name="Layer 1" viewBox="0 0 512 512" id="ethereum"><circle cx="256" cy="256" r="248.5" fill="#4956fc"></circle><circle cx="256" cy="256" r="198.5" fill="#5e8df7"></circle><path fill="#fefefe" d="m349.4 244.12-15.54 8.82-79.01 29.82-92.25-38.64 92.25-158.08 94.55 158.08z"></path><path fill="#c0cbf8" d="m349.4 244.12-94.55 53.64-92.25-53.64 92.25-43.07 94.55 43.07z"></path><path fill="#fefefe" d="m349.4 281.84-94.55 144.12-92.25-144.12 92.25 53.63 94.55-53.63z"></path><path fill="#c0cbf8" d="m349.4 281.84-94.55 144.12v-90.49l94.55-53.63zM349.4 244.12l-15.54 8.82-79.01-45.18V86.04l94.55 158.08z"></path><path fill="#8095f0" d="m349.4 244.12-94.55 53.64v-96.71l94.55 43.07z"></path><path fill="#3c3b41" d="M356.785 242.866a7.482 7.482 0 0 0-.05-.261q-.075-.36-.184-.71c-.02-.066-.037-.133-.059-.198a7.495 7.495 0 0 0-.345-.838c-.032-.067-.07-.13-.103-.195-.069-.133-.133-.266-.21-.395L261.285 82.192c-.02-.033-.045-.061-.065-.094q-.196-.315-.42-.61c-.036-.046-.07-.095-.107-.141a7.516 7.516 0 0 0-.587-.65c-.041-.041-.086-.077-.128-.117q-.257-.242-.536-.459a7.385 7.385 0 0 0-.2-.15q-.287-.207-.593-.387c-.047-.028-.092-.059-.14-.085a7.47 7.47 0 0 0-.805-.391c-.027-.011-.055-.02-.082-.03a7.426 7.426 0 0 0-.749-.252c-.074-.02-.15-.039-.224-.057q-.328-.081-.667-.132c-.078-.012-.156-.027-.235-.036a7.54 7.54 0 0 0-.898-.059h-.04c-.034 0-.066.006-.099.007a7.56 7.56 0 0 0-.788.056c-.083.01-.165.025-.248.038q-.34.054-.67.137c-.07.018-.142.035-.212.055a7.445 7.445 0 0 0-1.635.683c-.06.034-.116.071-.174.106q-.292.177-.566.378c-.067.049-.134.097-.2.149a7.524 7.524 0 0 0-.592.516c-.022.02-.045.039-.066.06a7.536 7.536 0 0 0-.579.653c-.048.061-.093.125-.14.187q-.21.282-.394.584c-.023.038-.052.072-.074.11l-92.247 158.077c-.065.112-.119.229-.178.343-.037.072-.077.142-.112.215a7.476 7.476 0 0 0-.34.833c-.016.05-.028.102-.043.152a7.441 7.441 0 0 0-.19.742 7.76 7.76 0 0 0-.048.255 7.515 7.515 0 0 0-.095.824c-.001.027-.007.053-.009.08v.02a7.488 7.488 0 0 0 .023.922c.007.083.018.164.027.246q.04.352.114.7c.017.079.03.158.05.237.01.041.016.083.027.125a7.527 7.527 0 0 0 .239.742c.014.037.032.071.047.108a7.464 7.464 0 0 0 .332.72c.04.077.082.152.125.227q.18.317.39.613c.037.053.071.108.11.16a7.5 7.5 0 0 0 .58.686c.05.052.103.1.155.151q.255.253.533.48c.068.056.135.111.204.164a7.49 7.49 0 0 0 .767.52l92.246 53.636c.022.013.046.021.068.034a7.445 7.445 0 0 0 .824.408l.03.011a7.44 7.44 0 0 0 .818.278c.074.02.149.038.223.057q.334.083.68.135c.051.007.101.023.152.03.026.003.053.002.08.005a6.918 6.918 0 0 0 1.777.002c.077-.01.153-.023.23-.035a7.441 7.441 0 0 0 .891-.187 7.416 7.416 0 0 0 .729-.242c.036-.015.074-.026.11-.04a7.486 7.486 0 0 0 .818-.397c.014-.007.028-.012.04-.02l94.55-53.636.022-.014a7.496 7.496 0 0 0 .754-.5c.073-.055.143-.112.214-.17q.279-.223.534-.472c.055-.053.112-.103.164-.158a7.51 7.51 0 0 0 .591-.69c.038-.048.07-.1.105-.15q.217-.302.403-.625a7.43 7.43 0 0 0 .128-.23 7.494 7.494 0 0 0 .328-.7c.018-.046.041-.09.059-.137a7.486 7.486 0 0 0 .248-.765c.01-.036.014-.073.023-.109.02-.077.033-.154.05-.231q.075-.352.116-.707c.01-.086.02-.17.028-.257a7.507 7.507 0 0 0 .023-.934v-.006c0-.012-.002-.022-.003-.033a7.49 7.49 0 0 0-.101-.888ZM247.349 284.72l-68.575-39.873 68.575-32.015Zm0-88.442-66.173 30.893 66.173-113.395Zm15-83.084 68.262 114.128-68.261-31.093Zm0 171.684v-72.166l70.56 32.139ZM437.02 74.98A256 256 0 0 0 74.98 437.02 256 256 0 0 0 437.02 74.98Zm-10.606 351.433A241 241 0 1 1 85.587 85.587a241 241 0 0 1 340.826 340.826ZM256 50C142.411 50 50 142.411 50 256s92.411 206 206 206 206-92.411 206-206S369.589 50 256 50Zm0 397c-105.318 0-191-85.682-191-191S150.682 65 256 65c105.317 0 191 85.682 191 191s-85.683 191-191 191Zm89.697-171.688-90.802 51.51-88.522-51.47a7.5 7.5 0 0 0-10.087 10.526l92.246 144.123.038.052a7.508 7.508 0 0 0 .51.696c.025.03.052.055.077.084q.238.279.503.532c.065.063.133.122.2.182q.225.201.466.384c.068.051.136.104.206.153a7.486 7.486 0 0 0 .654.415l.053.032a7.475 7.475 0 0 0 .787.373l.158.058q.32.122.654.215a7.39 7.39 0 0 0 .86.184c.084.013.167.028.253.038.243.03.49.046.74.051.039 0 .077.008.116.008h.042a7.552 7.552 0 0 0 .87-.055c.079-.009.155-.023.233-.035a7.464 7.464 0 0 0 .87-.181q.32-.087.627-.202c.063-.023.126-.044.188-.068a7.476 7.476 0 0 0 1.496-.807c.063-.045.124-.093.186-.14a7.537 7.537 0 0 0 1.13-1.035c.045-.05.093-.098.136-.15a7.52 7.52 0 0 0 .518-.69l.017-.023 94.549-144.123a7.5 7.5 0 0 0-9.972-10.637ZM247.35 400.328 185.63 303.9l61.72 35.887Zm15 .524V339.84l63.752-36.166Z"></path></svg>
                                </div>
                                <div class="star-5">
                                 <svg xmlns="http://www.w3.org/2000/svg" data-name="Layer 1" viewBox="0 0 512 512" id="ethereum"><circle cx="256" cy="256" r="248.5" fill="#4956fc"></circle><circle cx="256" cy="256" r="198.5" fill="#5e8df7"></circle><path fill="#fefefe" d="m349.4 244.12-15.54 8.82-79.01 29.82-92.25-38.64 92.25-158.08 94.55 158.08z"></path><path fill="#c0cbf8" d="m349.4 244.12-94.55 53.64-92.25-53.64 92.25-43.07 94.55 43.07z"></path><path fill="#fefefe" d="m349.4 281.84-94.55 144.12-92.25-144.12 92.25 53.63 94.55-53.63z"></path><path fill="#c0cbf8" d="m349.4 281.84-94.55 144.12v-90.49l94.55-53.63zM349.4 244.12l-15.54 8.82-79.01-45.18V86.04l94.55 158.08z"></path><path fill="#8095f0" d="m349.4 244.12-94.55 53.64v-96.71l94.55 43.07z"></path><path fill="#3c3b41" d="M356.785 242.866a7.482 7.482 0 0 0-.05-.261q-.075-.36-.184-.71c-.02-.066-.037-.133-.059-.198a7.495 7.495 0 0 0-.345-.838c-.032-.067-.07-.13-.103-.195-.069-.133-.133-.266-.21-.395L261.285 82.192c-.02-.033-.045-.061-.065-.094q-.196-.315-.42-.61c-.036-.046-.07-.095-.107-.141a7.516 7.516 0 0 0-.587-.65c-.041-.041-.086-.077-.128-.117q-.257-.242-.536-.459a7.385 7.385 0 0 0-.2-.15q-.287-.207-.593-.387c-.047-.028-.092-.059-.14-.085a7.47 7.47 0 0 0-.805-.391c-.027-.011-.055-.02-.082-.03a7.426 7.426 0 0 0-.749-.252c-.074-.02-.15-.039-.224-.057q-.328-.081-.667-.132c-.078-.012-.156-.027-.235-.036a7.54 7.54 0 0 0-.898-.059h-.04c-.034 0-.066.006-.099.007a7.56 7.56 0 0 0-.788.056c-.083.01-.165.025-.248.038q-.34.054-.67.137c-.07.018-.142.035-.212.055a7.445 7.445 0 0 0-1.635.683c-.06.034-.116.071-.174.106q-.292.177-.566.378c-.067.049-.134.097-.2.149a7.524 7.524 0 0 0-.592.516c-.022.02-.045.039-.066.06a7.536 7.536 0 0 0-.579.653c-.048.061-.093.125-.14.187q-.21.282-.394.584c-.023.038-.052.072-.074.11l-92.247 158.077c-.065.112-.119.229-.178.343-.037.072-.077.142-.112.215a7.476 7.476 0 0 0-.34.833c-.016.05-.028.102-.043.152a7.441 7.441 0 0 0-.19.742 7.76 7.76 0 0 0-.048.255 7.515 7.515 0 0 0-.095.824c-.001.027-.007.053-.009.08v.02a7.488 7.488 0 0 0 .023.922c.007.083.018.164.027.246q.04.352.114.7c.017.079.03.158.05.237.01.041.016.083.027.125a7.527 7.527 0 0 0 .239.742c.014.037.032.071.047.108a7.464 7.464 0 0 0 .332.72c.04.077.082.152.125.227q.18.317.39.613c.037.053.071.108.11.16a7.5 7.5 0 0 0 .58.686c.05.052.103.1.155.151q.255.253.533.48c.068.056.135.111.204.164a7.49 7.49 0 0 0 .767.52l92.246 53.636c.022.013.046.021.068.034a7.445 7.445 0 0 0 .824.408l.03.011a7.44 7.44 0 0 0 .818.278c.074.02.149.038.223.057q.334.083.68.135c.051.007.101.023.152.03.026.003.053.002.08.005a6.918 6.918 0 0 0 1.777.002c.077-.01.153-.023.23-.035a7.441 7.441 0 0 0 .891-.187 7.416 7.416 0 0 0 .729-.242c.036-.015.074-.026.11-.04a7.486 7.486 0 0 0 .818-.397c.014-.007.028-.012.04-.02l94.55-53.636.022-.014a7.496 7.496 0 0 0 .754-.5c.073-.055.143-.112.214-.17q.279-.223.534-.472c.055-.053.112-.103.164-.158a7.51 7.51 0 0 0 .591-.69c.038-.048.07-.1.105-.15q.217-.302.403-.625a7.43 7.43 0 0 0 .128-.23 7.494 7.494 0 0 0 .328-.7c.018-.046.041-.09.059-.137a7.486 7.486 0 0 0 .248-.765c.01-.036.014-.073.023-.109.02-.077.033-.154.05-.231q.075-.352.116-.707c.01-.086.02-.17.028-.257a7.507 7.507 0 0 0 .023-.934v-.006c0-.012-.002-.022-.003-.033a7.49 7.49 0 0 0-.101-.888ZM247.349 284.72l-68.575-39.873 68.575-32.015Zm0-88.442-66.173 30.893 66.173-113.395Zm15-83.084 68.262 114.128-68.261-31.093Zm0 171.684v-72.166l70.56 32.139ZM437.02 74.98A256 256 0 0 0 74.98 437.02 256 256 0 0 0 437.02 74.98Zm-10.606 351.433A241 241 0 1 1 85.587 85.587a241 241 0 0 1 340.826 340.826ZM256 50C142.411 50 50 142.411 50 256s92.411 206 206 206 206-92.411 206-206S369.589 50 256 50Zm0 397c-105.318 0-191-85.682-191-191S150.682 65 256 65c105.317 0 191 85.682 191 191s-85.683 191-191 191Zm89.697-171.688-90.802 51.51-88.522-51.47a7.5 7.5 0 0 0-10.087 10.526l92.246 144.123.038.052a7.508 7.508 0 0 0 .51.696c.025.03.052.055.077.084q.238.279.503.532c.065.063.133.122.2.182q.225.201.466.384c.068.051.136.104.206.153a7.486 7.486 0 0 0 .654.415l.053.032a7.475 7.475 0 0 0 .787.373l.158.058q.32.122.654.215a7.39 7.39 0 0 0 .86.184c.084.013.167.028.253.038.243.03.49.046.74.051.039 0 .077.008.116.008h.042a7.552 7.552 0 0 0 .87-.055c.079-.009.155-.023.233-.035a7.464 7.464 0 0 0 .87-.181q.32-.087.627-.202c.063-.023.126-.044.188-.068a7.476 7.476 0 0 0 1.496-.807c.063-.045.124-.093.186-.14a7.537 7.537 0 0 0 1.13-1.035c.045-.05.093-.098.136-.15a7.52 7.52 0 0 0 .518-.69l.017-.023 94.549-144.123a7.5 7.5 0 0 0-9.972-10.637ZM247.35 400.328 185.63 303.9l61.72 35.887Zm15 .524V339.84l63.752-36.166Z"></path></svg>

                                 </div>
                                </span>
                           </button>

                    </div>
                </div>
            {% endfor %}
            {% if others_posts|length == 0 %}
                <h5>No offers available</h5>
            {% endif %}
        </div>
    </main>

    {{ javascriptCode|raw }}

    <script>
        var buyButtons = document.querySelectorAll('.buy_eth_button');

        buyButtons.forEach(function(button) {
            button.addEventListener('click', function() {
                var postId = button.getAttribute('data-post-id');
                var postAmount = button.getAttribute('data-post-amount');
                console.log("Buy button clicked for post ID: " + postId);
                const url = 'https://127.0.0.1:8000/financialHub.com/crypto/space/p2p/buy_eth/'+postId;

                fetch(url, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Requested-With': 'XMLHttpRequest'
                    }
                }).then(function(response){
                    sendEthToSeller();
                });
            });
        });


                function sendEthToSeller(){
            //ganache client running on port 7545
            var web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:7545'));

            const getAccounts = async () => {

                //To get accounts with private key
                let account = await web3.eth.accounts.privateKeyToAccount('0x'+'47e766dc0c8c81aeb3c9294edf644edb5f8970a43566b50ad3611481a8ee2f0d');
                console.log(account);
                return account;
            }
            getAccounts()
                .then(account => {
                    console.log('Imported account:', account);

                    web3.eth.getBalance(account.address)
                        .then(function(balance) {
                            console.log('bank Balance before transaction:', web3.utils.fromWei(balance, 'ether'), 'ETH');

                            const bankAddress = '0x15c0423b762e122fe85b050A6F5e160D72D1Fc34'; // Replace with the buyer's address
                            const amountToSend = web3.utils.toWei('0.5', 'ether'); // Example: 1 Ether
                            var recipient = '';

                            window.ethereum.request({ method: 'eth_requestAccounts' })
                                .then(function(accounts) {
                                    recipient = accounts[0];


                            web3.eth.sendTransaction({
                                from: bankAddress, // Ganache account address
                                to: recipient,
                                value: amountToSend
                            })
                                .on('transactionHash', function(hash) {
                                    console.log('Transaction Hash:', hash);
                                })
                                .on('receipt', function(receipt) {
                                    console.log('Transaction Receipt:', receipt);
                                })
                                .on('error', function(error) {
                                    console.error('Error sending transaction:', error);
                                });

                        })
                        })
                        .catch(function(error) {
                            console.error('Error getting balance:', error);
                        });
                })
                .catch(error => {
                    console.error('Error:', error);
                });


        }

    </script>
{% endblock %}
